<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Facility - Lithium Dashboard</title> <!-- Changed Title -->
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Navigation Placeholder -->
        <div id="main-navigation" class="mb-4">
             <nav class="navbar navbar-expand-lg navbar-light bg-light rounded p-2">
                 <div class="container-fluid">
                     <a class="navbar-brand" href="#">✏️ Edit Facility</a> <!-- Changed Brand Text -->
                     <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                         <span class="navbar-toggler-icon"></span>
                     </button>
                     <div class="collapse navbar-collapse" id="navbarNav">
                         <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                             <li class="nav-item"><a class="nav-link" href="index.html">Map</a></li>
                             <li class="nav-item"><a class="nav-link" href="facilities.html">Facilities</a></li>
                             <li class="nav-item"><a class="nav-link" href="charts.html">Charts</a></li>
                             <li class="nav-item"><a class="nav-link" href="documents.html">Documents</a></li> <!-- Added Documents Link -->
                         </ul>
                         <div id="authStatus" class="d-flex">
                             <!-- Login/Logout status will be loaded here -->
                         </div>
                     </div>
                 </div>
             </nav>
        </div>

         <div class="d-flex justify-content-between align-items-center mb-4">
             <h3 id="editPageTitle">Edit Facility Details</h3> <!-- Changed Title -->
             <div>
                 <button type="button" id="deleteButton" class="btn btn-outline-danger me-2"><i class="fas fa-trash-alt"></i> Delete Facility</button> <!-- Added Delete Button -->
                 <a href="#" id="cancelButton" class="btn btn-outline-secondary"><i class="fas fa-times"></i> Cancel</a> <!-- Cancel button needs dynamic href -->
             </div>
         </div>

        <div id="errorMessage" class="alert alert-danger d-none" role="alert"></div>
        <div id="successMessage" class="alert alert-success d-none" role="alert"></div>

        <form id="editFacilityForm"> <!-- Changed form ID -->
            <div class="card mb-3">
                <div class="card-header">Basic Information</div>
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="facilityName" class="form-label">Facility Name <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="facilityName" required>
                        </div>
                        <div class="col-md-6">
                            <label for="facilityId" class="form-label">Facility ID</label>
                            <input type="text" class="form-control" id="facilityId" readonly> <!-- Made readonly -->
                             <div class="form-text">Cannot be changed.</div>
                        </div>
                        <div class="col-md-6">
                            <label for="company" class="form-label">Company</label>
                            <input type="text" class="form-control" id="company">
                        </div>
                         <div class="col-md-6">
                            <label for="status" class="form-label">Status</label>
                            <select class="form-select" id="status">
                                <option value="Operating">Operating</option>
                                <option value="Under Construction">Under Construction</option>
                                <option value="Planned">Planned</option>
                                <option value="Pilot">Pilot</option>
                                <option value="Closed">Closed</option>
                            </select>
                        </div>
                        <div class="col-12">
                            <label for="address" class="form-label">Address</label>
                            <input type="text" class="form-control" id="address" placeholder="Street, City, State/Province, Country">
                        </div>
                         <div class="col-md-6">
                            <label for="region" class="form-label">Region</label>
                            <input type="text" class="form-control" id="region" placeholder="e.g., Southeast, Midwest, Canada">
                        </div>
                        <div class="col-md-6">
                            <label for="country" class="form-label">Country</label>
                            <input type="text" class="form-control" id="country">
                        </div>
                    </div>
                </div>
            </div>

             <div class="card mb-3">
                <div class="card-header">Location (Coordinates)</div>
                <div class="card-body">
                     <div class="row g-3">
                         <div class="col-md-6">
                            <label for="longitude" class="form-label">Longitude <span class="text-danger">*</span></label>
                            <input type="number" step="any" class="form-control" id="longitude" required>
                         </div>
                         <div class="col-md-6">
                             <label for="latitude" class="form-label">Latitude <span class="text-danger">*</span></label>
                            <input type="number" step="any" class="form-control" id="latitude" required>
                         </div>
                     </div>
                </div>
            </div>

            <div class="card mb-3">
                <div class="card-header">Technical Details</div>
                <div class="card-body">
                     <div class="row g-3">
                         <div class="col-md-6">
                            <label for="capacity" class="form-label">Processing Capacity</label>
                            <input type="text" class="form-control" id="capacity" placeholder="e.g., 10,000 tonnes per year">
                        </div>
                         <div class="col-md-6">
                            <label for="technology" class="form-label">Technology</label>
                            <input type="text" class="form-control" id="technology" placeholder="e.g., Hydrometallurgical process">
                        </div>
                         <div class="col-md-6">
                            <label for="yearStarted" class="form-label">Year Started / Planned</label>
                            <input type="number" class="form-control" id="yearStarted" placeholder="e.g., 2023">
                        </div>
                         <div class="col-md-6">
                            <label for="size" class="form-label">Facility Size</label>
                            <input type="text" class="form-control" id="size" placeholder="e.g., 150,000 square feet">
                        </div>
                         <div class="col-12">
                            <label for="feedstock" class="form-label">Feedstock</label>
                            <input type="text" class="form-control" id="feedstock" placeholder="e.g., Manufacturing scrap and end-of-life batteries">
                        </div>
                         <div class="col-12">
                            <label for="products" class="form-label">Output Products</label>
                            <input type="text" class="form-control" id="products" placeholder="e.g., Black mass, Cathode materials">
                        </div>
                         <div class="col-12">
                             <label for="technologyDetails" class="form-label">Technology Details</label>
                             <textarea class="form-control" id="technologyDetails" rows="3"></textarea>
                         </div>
                     </div>
                </div>
            </div>

             <div class="card mb-3">
                <div class="card-header">Description & Media</div>
                <div class="card-body">
                     <div class="row g-3">
                         <div class="col-12">
                            <label for="description" class="form-label">Facility Description</label>
                            <textarea class="form-control" id="description" rows="5"></textarea>
                        </div>
                         <div class="col-md-6">
                            <label for="website" class="form-label">Website URL</label>
                            <input type="url" class="form-control" id="website" placeholder="https://...">
                        </div>
                         <div class="col-md-6">
                            <label for="companyLogo" class="form-label">Company Logo URL</label>
                            <input type="text" class="form-control" id="companyLogo" placeholder="e.g., images/logos/company.png">
                        </div>
                         <div class="col-md-6">
                            <label for="facilityImage" class="form-label">Facility Image URL</label>
                            <input type="text" class="form-control" id="facilityImage" placeholder="e.g., images/facilities/facility.jpg">
                        </div>
                         <div class="col-md-6">
                            <label for="fundingSource" class="form-label">Funding Source</label>
                            <input type="text" class="form-control" id="fundingSource" placeholder="e.g., Private investment, DOE grant">
                        </div>
                         <div class="col-12">
                             <label for="timeline" class="form-label">Timeline (JSON format)</label>
                             <textarea class="form-control" id="timeline" rows="4" placeholder='[{"year": "2023", "event": "Construction started"}, {"year": "2024", "event": "Operations begin"}]'></textarea>
                             <div class="form-text">Enter as a JSON array of objects, each with "year" and "event" keys.</div>
                         </div>
                     </div>
                </div>
            </div>


            <button type="submit" class="btn btn-primary w-100 mb-4">Update Facility</button> <!-- Changed Button Text -->
        </form>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom Edit Page JS -->
    <script src="js/edit-facility.js"></script>

    <!-- Footer Placeholder -->
    <div id="footer-placeholder"></div>
</body>
</html>